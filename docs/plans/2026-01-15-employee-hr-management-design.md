# 員工管理與人事管理功能設計

## 目標

明確區分兩個模組的職責：
1. **系統設定 > 員工管理**：帳號與權限管理（IT/管理員視角）
2. **人事管理**：完整人事作業（HR視角）

---

## 功能差異對照表

| 項目 | 員工管理 (系統設定) | 人事管理 |
|------|-------------------|---------|
| **位置** | `/dashboard/settings/employees` | `/dashboard/hr` |
| **目的** | 管理員工帳號與系統權限 | 完整人事行政作業 |
| **主要使用者** | 系統管理員、IT | HR人員、部門主管 |
| **功能範圍** | 見下方詳述 | 見下方詳述 |

---

## 系統設定 > 員工管理

### 功能清單

1. **員工帳號列表**
   - 顯示所有員工的系統帳號
   - 篩選：依公司、部門、帳號狀態
   - 搜尋：員工編號、姓名、Email

2. **新增員工帳號**
   - 必填：員工編號、姓名、Email、密碼
   - 指派：公司、部門、職位
   - 設定：角色、帳號啟用狀態

3. **編輯員工帳號**
   - 修改基本資料
   - 變更密碼（管理員重設）
   - 調整任職資訊
   - 啟用/停用帳號

4. **權限管理**
   - 指派角色
   - 個別權限調整（授予/撤銷）
   - 查看有效權限清單

5. **帳號安全**
   - 強制登出
   - 密碼重設
   - 登入紀錄查詢

### 路由結構

```
/dashboard/settings/employees          # 員工帳號列表
/dashboard/settings/employees/new      # 新增員工帳號
/dashboard/settings/employees/[id]     # 編輯員工帳號
/dashboard/settings/roles              # 角色管理（已存在）
```

---

## 人事管理

### 功能清單

1. **組織架構**
   - 部門管理（新增、編輯、停用）
   - 職位管理（新增、編輯、停用）
   - 組織圖呈現

2. **員工資料管理**
   - 完整員工個人資料
     - 身分證字號、生日、性別
     - 緊急聯絡人
     - 戶籍地址、居住地址
   - 任職歷史
   - 異動紀錄

3. **到職作業**
   - 新進員工資料建立
   - 分配部門、職位
   - 設定直屬主管
   - 自動建立系統帳號

4. **離職作業**
   - 離職日期設定
   - 離職類型（自願、非自願、退休等）
   - 交接狀態追蹤
   - 帳號自動停用

5. **調動作業**
   - 部門調動
   - 職位調整
   - 公司調動（集團內）
   - 主管變更

6. **報表**
   - 在職人員名冊
   - 新進/離職統計
   - 組織人數統計

### 路由結構

```
/dashboard/hr                           # 人事管理首頁
/dashboard/hr/employees                 # 員工列表
/dashboard/hr/employees/[id]            # 員工詳細資料
/dashboard/hr/employees/new             # 到職作業
/dashboard/hr/departments               # 部門管理
/dashboard/hr/positions                 # 職位管理
/dashboard/hr/organization              # 組織圖
/dashboard/hr/reports                   # 人事報表
```

---

## 資料模型關係

### 現有 Employee 模型欄位分類

```
【帳號相關 - 員工管理使用】
- email, passwordHash
- isActive (帳號狀態)

【人事相關 - 人事管理使用】
- employeeNo, name
- idNumber, gender, birthDate
- phone, personalEmail
- residentialAddress, householdAddress
- emergencyContact, emergencyPhone
- hireDate, resignDate

【共用】
- EmployeeAssignment (任職關係)
- EmployeePermission (個人權限)
```

---

## 權限設計

### 員工管理（系統設定）權限

| 權限代碼 | 說明 |
|---------|------|
| `employee.view` | 查看員工帳號列表 |
| `employee.create` | 新增員工帳號 |
| `employee.edit` | 編輯員工帳號 |
| `employee.deactivate` | 停用員工帳號 |
| `employee.reset_password` | 重設密碼 |
| `employee.assign_role` | 指派角色 |
| `employee.adjust_permission` | 調整個別權限 |

### 人事管理權限

| 權限代碼 | 說明 |
|---------|------|
| `hr.view` | 查看人事資料 |
| `hr.manage` | 管理人事資料 |
| `hr.onboard` | 到職作業 |
| `hr.offboard` | 離職作業 |
| `hr.transfer` | 調動作業 |
| `hr.department.manage` | 部門管理 |
| `hr.position.manage` | 職位管理 |
| `hr.report` | 查看人事報表 |

---

## 實作優先順序

### Phase 1：基礎功能
1. ✅ 員工帳號列表頁面
2. ✅ 新增員工帳號表單
3. ✅ 編輯員工帳號表單
4. 角色指派介面

### Phase 2：人事管理基礎
1. 部門管理 CRUD
2. 職位管理 CRUD
3. 員工資料列表
4. 員工詳細資料頁面

### Phase 3：進階功能
1. 到職/離職流程
2. 調動作業
3. 組織圖
4. 人事報表

---

## UI 設計參考

### 員工帳號列表

```
+--------------------------------------------------+
| 員工帳號管理                        [+ 新增帳號] |
+--------------------------------------------------+
| 篩選: [公司 ▼] [部門 ▼] [狀態 ▼]  搜尋: [______] |
+--------------------------------------------------+
| 編號   | 姓名     | Email          | 角色   | 狀態 |
|--------|----------|----------------|--------|------|
| EMP001 | 系統管理員| admin@...     | 超級管理| 啟用 |
| EMP002 | 王經理   | manager@...    | 主管   | 啟用 |
| EMP003 | 李小明   | staff@...      | 員工   | 啟用 |
+--------------------------------------------------+
```

### 人事管理首頁

```
+--------------------------------------------------+
| 人事管理                                          |
+--------------------------------------------------+
| +-------------+ +-------------+ +-------------+   |
| | 組織架構    | | 員工資料    | | 到離職作業  |   |
| | 部門 / 職位 | | 查詢 / 編輯 | | 新進 / 離職 |   |
| +-------------+ +-------------+ +-------------+   |
|                                                   |
| +-------------+ +-------------+                   |
| | 調動作業    | | 人事報表    |                   |
| | 部門 / 職位 | | 統計分析    |                   |
| +-------------+ +-------------+                   |
+--------------------------------------------------+
```

---

## 驗證項目

1. 員工帳號頁面與人事管理頁面分離
2. 權限正確控制存取
3. 到職時自動建立帳號
4. 離職時自動停用帳號
5. 調動時更新任職關係
